<header class="site-header">
  <div class="container header-inner">
    <!-- Brand -->
    <a
      class="brand"
      [routerLink]="isAdmin ? '/admin-dashboard' : '/'"
      aria-label="ReserveOne home"
      (click)="closeNav.emit()"
      [class.disabled]="isAdmin"
      [attr.tabindex]="isAdmin ? -1 : 0"
      [attr.aria-disabled]="isAdmin ? 'true' : null"
      (click)="isAdmin ? $event.preventDefault() : null"
    >
      <span class="brand-mark" aria-hidden="true"></span>
      <span class="brand-text">
        <span class="brand-name">ReserveOne</span>
        <span class="brand-tag">Smarter stays â€¢ Better booking</span>
      </span>
    </a>

    <!-- Navigation (now a component) -->
    <app-nav [isOpen]="isNavOpen" (toggle)="toggleNav.emit()" (close)="closeNav.emit()"></app-nav>

    <!-- Actions -->
    <div class="header-actions">
      <button class="btn btn-ghost" type="button" (click)="openBooking.emit()">Search</button>

      <!-- Avatar/User Menu Button -->
      <div class="user-menu">
        <button
          class="avatar-btn"
          type="button"
          aria-label="Open user menu"
          (click)="toggleUserMenu()"
        >
          <span class="avatar">{{ avatarText }}</span>
        </button>
        <div class="menu-backdrop" *ngIf="userMenuOpen" (click)="closeUserMenu()"></div>
        <div class="menu-panel" *ngIf="userMenuOpen">
          <div class="user-menu-header">
            <span class="user-label">{{ userLabel }}</span>
            <span class="user-email">{{ userEmail }}</span>
            <span class="menu-role" *ngIf="roleLabel">{{ roleLabel }}</span>
          </div>
          <button class="menu-item" type="button" (click)="onOpenProfile()">
            Profile & Settings
          </button>
          <a *ngIf="isAdmin" routerLink="/admin-dashboard" class="menu-item">Admin Dashboard</a>
          <a *ngIf="isAdmin" routerLink="/admin/reservations" class="menu-item">Reservations</a>
          <a *ngIf="isAdmin" routerLink="/admin/payment-transactions" class="menu-item"
            >Payment Transactions</a
          >
          <a *ngIf="showSystemSettings" routerLink="/admin/system-settings" class="menu-item"
            >System Settings</a
          >
          <button class="menu-item danger" type="button" (click)="logout.emit()">Sign out</button>
        </div>
      </div>
    </div>
  </div>
</header>
