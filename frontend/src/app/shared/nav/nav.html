<nav class="nav" aria-label="Primary navigation">
  <button
    class="nav-toggle"
    type="button"
    aria-label="Open menu"
    [attr.aria-expanded]="isOpen"
    [disabled]="hideAllNavItems"
    (click)="!hideAllNavItems && toggle.emit()"
  >
    ☰
  </button>

  <ul class="nav-list" [class.open]="isOpen" [class.nav-list--empty]="hideAllNavItems">
    <ng-container *ngIf="!hideAllNavItems">
      <!-- ADMIN -->
      <ng-container *ngIf="isAdmin; else landingNav">
        <!-- Admin dashboard: anchor links -->
        <ng-container *ngIf="isOnAdminDashboard; else adminRouteNav">
          <li>
            <a
              href="#revenue"
              (click)="$event.preventDefault(); scrollToSection('revenue'); close.emit()"
            >
              Revenue
            </a>
          </li>

          <li>
            <a
              href="#reservations"
              (click)="$event.preventDefault(); scrollToSection('reservations'); close.emit()"
            >
              Reservations
            </a>
          </li>

          <li>
            <a
              href="#reports"
              (click)="$event.preventDefault(); scrollToSection('reports'); close.emit()"
            >
              Reports
            </a>
          </li>
        </ng-container>

        <!-- Other admin pages: route links -->
        <ng-template #adminRouteNav>
          <li>
            <a [routerLink]="['/admin-dashboard']" routerLinkActive="active" (click)="close.emit()">
              Dashboard
            </a>
          </li>

          <li>
            <a
              [routerLink]="['/payment-transactions']"
              routerLinkActive="active"
              (click)="close.emit()"
            >
              Payments
            </a>
          </li>

          <li>
            <a
              [routerLink]="['/admin/reservations']"
              routerLinkActive="active"
              (click)="close.emit()"
            >
              Reservations
            </a>
          </li>

          <li>
            <a [routerLink]="['/admin/rooms']" routerLinkActive="active" (click)="close.emit()">
              Rooms
            </a>
          </li>

          <!-- Removed: Generate Report link in header/nav -->
        </ng-template>
      </ng-container>

      <!-- LANDING -->
      <ng-template #landingNav>
        <li>
          <a [routerLink]="['/rooms']" routerLinkActive="active" (click)="close.emit()">Rooms</a>
        </li>

        <li>
          <a
            href="#amenities"
            (click)="$event.preventDefault(); scrollToSection('amenities'); close.emit()"
          >
            Amenities
          </a>
        </li>

        <li>
          <a
            href="#rewards"
            (click)="$event.preventDefault(); scrollToSection('rewards'); close.emit()"
          >
            Rewards
          </a>
        </li>

        <!-- More -->
        <li class="more">
          <button
            type="button"
            class="more-btn"
            aria-haspopup="menu"
            [attr.aria-expanded]="moreOpen"
            (click)="toggleMore()"
          >
            More <span aria-hidden="true">▾</span>
          </button>

          <div class="more-menu" *ngIf="moreOpen" role="menu" aria-label="More navigation">
            <a
              href="#offers"
              role="menuitem"
              (click)="$event.preventDefault(); scrollToSection('offers'); closeAllMenus()"
            >
              Offers
            </a>

            <a
              href="#faq"
              role="menuitem"
              (click)="$event.preventDefault(); scrollToSection('faq'); closeAllMenus()"
            >
              FAQ
            </a>

            <a
              href="#contact"
              role="menuitem"
              (click)="$event.preventDefault(); scrollToSection('contact'); closeAllMenus()"
            >
              Contact
            </a>
          </div>
        </li>
      </ng-template>
    </ng-container>
  </ul>
</nav>
